(this["webpackJsonpnccp-service-desk-client"]=this["webpackJsonpnccp-service-desk-client"]||[]).push([[0],{106:function(e,t,a){},131:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(26),l=a.n(r),o=a(11),i=(a(106),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(107);var u=a(33),m=a(96),d=a(14),p={isRequest:!1,isLoading:!1},E={list:[],isRequest:!1,isLoading:!1,department:null},b={list:[],myList:[],current:{incident:null,isChange:!1},isRequest:!1,isLoading:!1,isUpdate:!0},f=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_REQUEST_SENDD":return Object(d.a)({},e,{isLoading:!1,isRequest:!0});case"AUTH_REQUEST_SUCCESSED":var a=t.data.user;return Object(d.a)({},e,{user:a,isLoading:!0,isRequest:!1});default:return e}},catalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CATALOG_REQUEST_SENDD":return Object(d.a)({},e,{isLoading:!1,isRequest:!0});case"CATALOG_REQUEST_SUCCESSED":return Object(d.a)({},e,{list:t.data,isLoading:!0,isRequest:!1});case"DEPARTMENT_REQUEST_SUCCESSED":return Object(d.a)({},e,{department:t.data});default:return e}},incidents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INCIDENT_REQUEST_SENDD":return Object(d.a)({},e,{isLoading:!1,isRequest:!0});case"INCIDENT_REQUEST_SUCCESSED":return Object(d.a)({},e,{list:t.data,isLoading:!0,isUpdate:!1,isRequest:!1});case"MY_INCIDENT_REQUEST_SUCCESSED":return Object(d.a)({},e,{myList:t.data,isLoading:!0,isRequest:!1,isUpdate:!1});case"INCIDENT_CREATE":return Object(d.a)({},e,{isUpdate:!0});case"INCIDENT_CHOOSE":return Object(d.a)({},e,{current:Object(d.a)({},e.current,{incident:t.incident})});default:return e}}}),v=a(19),O=a.n(v),g=a(12),h=a(25),j=function(e,t,a,n){return{type:"CATALOG_POST",method:t,route:e,data:a,id:n}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"incidents";return{type:"INCIDENT_FETCHING",route:n,method:e,data:t,id:a}},S=function(e){return{type:"INCIDENT_REQUEST_SUCCESSED",data:e}},_=function(e){return{type:"MY_INCIDENT_REQUEST_SUCCESSED",data:e}},I=O.a.mark(U),y=O.a.mark(w),N=O.a.mark(D),x=O.a.mark(A),T=O.a.mark(R),k=O.a.mark(L);function U(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.d)("AUTH_FETCHING",D);case 2:return e.next=4,Object(g.d)("CATALOG_FETCHING",A);case 4:return e.next=6,Object(g.c)("CATALOG_POST",L);case 6:return e.next=8,Object(g.c)("QUERY_API",w);case 8:return e.next=10,Object(g.c)("INCIDENT_FETCHING",R);case 10:case"end":return e.stop()}}),I)}function w(e){var t,a,n,c,r,l;return O.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:t=e.route,a=e.successedAction,n=e.method,c=e.data,r=e.id,o.prev=1,o.t0=n,o.next="post"===o.t0?5:"delete"===o.t0?9:13;break;case 5:return o.next=7,Object(g.a)((function(){return h.post("http://localhost:8080/api/".concat(t),c)}));case 7:return l=o.sent,o.abrupt("break",17);case 9:return o.next=11,Object(g.a)((function(){return h.delete("http://localhost:8080/api/".concat(t,"/").concat(r),c)}));case 11:return l=o.sent,o.abrupt("break",17);case 13:return o.next=15,Object(g.a)((function(){return h.get("http://localhost:8080/api/".concat(t,"/").concat(r||""),c)}));case 15:return l=o.sent,o.abrupt("break",17);case 17:return o.next=19,Object(g.b)(a(l.data));case 19:o.next=24;break;case 21:o.prev=21,o.t1=o.catch(1),console.log(o.t1.message);case 24:case"end":return o.stop()}}),y,null,[[1,21]])}function D(e){var t,a;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.ip,n.prev=1,n.next=4,Object(g.b)({type:"AUTH_REQUEST_SENDD"});case 4:return n.next=6,Object(g.a)((function(){return h.get("http://localhost:8080/api/auth/?ip=".concat(t))}));case 6:return a=n.sent,n.next=9,Object(g.b)({type:"AUTH_REQUEST_SUCCESSED",data:a.data[0]});case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),console.log(n.t0.message);case 14:case"end":return n.stop()}}),N,null,[[1,11]])}function A(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(g.b)({type:"CATALOG_REQUEST_SENDD"});case 3:return t.next=5,Object(g.a)((function(){return h.get("http://localhost:8080/api/categories")}));case 5:return e=t.sent,t.next=8,Object(g.b)({type:"CATALOG_REQUEST_SUCCESSED",data:e.data});case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0.message);case 13:case"end":return t.stop()}}),x,null,[[0,10]])}function R(e){var t,a,n,c,r;return O.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.route,a=e.method,n=e.data,c=e.id,l.prev=1,l.next=4,Object(g.b)({type:"INCIDENT_REQUEST_SENDD"});case 4:l.t0=a,l.next="post"===l.t0?7:"delete"===l.t0?10:"put"===l.t0?13:"get"===l.t0?16:22;break;case 7:return l.next=9,Object(g.a)((function(){return h.post("http://localhost:8080/api/".concat(t),n)}));case 9:return l.abrupt("break",23);case 10:return l.next=12,Object(g.a)((function(){return h.delete("http://localhost:8080/api/".concat(t,"/").concat(c),n)}));case 12:return l.abrupt("break",23);case 13:return l.next=15,Object(g.a)((function(){return h.put("http://localhost:8080/api/".concat(t,"/").concat(c),n)}));case 15:return l.abrupt("break",23);case 16:return l.next=18,Object(g.a)((function(){return h.get("http://localhost:8080/api/incidents")}));case 18:return r=l.sent,l.next=21,Object(g.b)(S(r.data));case 21:case 22:return l.abrupt("break",23);case 23:l.next=28;break;case 25:l.prev=25,l.t1=l.catch(1),console.log(l.t1.message);case 28:case"end":return l.stop()}}),T,null,[[1,25]])}function L(e){var t,a,n,c;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.route,a=e.method,n=e.data,c=e.id,r.prev=1,r.next=4,Object(g.b)({type:"AUTH_REQUEST_SENDD"});case 4:r.t0=a,r.next="post"===r.t0?7:"delete"===r.t0?10:13;break;case 7:return r.next=9,Object(g.a)((function(){return h.post("http://localhost:8080/api/".concat(t),n)}));case 9:return r.abrupt("break",14);case 10:return r.next=12,Object(g.a)((function(){return h.delete("http://localhost:8080/api/".concat(t,"/").concat(c),n)}));case 12:case 13:return r.abrupt("break",14);case 14:return r.next=16,Object(g.b)({type:"CATALOG_FETCHING"});case 16:r.next=21;break;case 18:r.prev=18,r.t1=r.catch(1),console.log(r.t1.message);case 21:case"end":return r.stop()}}),k,null,[[1,18]])}var G=Object(m.a)(),H=Object(u.e)(f,Object(u.a)(G));G.run(U);var F=H,Q=a(41),M=a(35),W=function(e,t,a,n,c){return{type:"QUERY_API",route:e,successedAction:t,data:n,id:c,method:a}},q=function(e){return{type:"DEPARTMENT_REQUEST_SUCCESSED",data:e}},P=a(10),B=a(37),Y=a.n(B),z=a(86),J=a.n(z),X=(a(84),Object(n.memo)((function(e){var t=e.startWork,a=e.nameResponsible;return(c.a.createElement(c.a.Fragment,null,c.a.createElement("small",null,"".concat(a," \u043f\u0440\u0438\u043d\u044f\u043b(\u0430) \u0432 \u0440\u0430\u0431\u043e\u0442\u0443 "),c.a.createElement(Y.a,{locale:"ru",fromNow:!0},t))))}))),$=a(136),K=a(66),V=a(90),Z=Object(n.memo)((function(e){var t=e.myincident,a=e.status,r=Object(n.useState)("\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"),l=Object(P.a)(r,1)[0];return a?c.a.createElement(c.a.Fragment,null,t?c.a.createElement(V.a,{variant:"info",disabled:!0,size:"sm"},l):c.a.createElement($.a,{id:"dropdown-item-button",title:l,variant:"info",size:"sm"},c.a.createElement(K.a.Item,null,"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"),c.a.createElement(K.a.Item,null,"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435 (\u043f\u043e\u0434\u0440\u044f\u0434\u0447\u0438\u043a)"),c.a.createElement(K.a.Item,null,"\u0413\u043e\u0442\u043e\u0432\u043e"))):c.a.createElement(c.a.Fragment,null)})),ee=Object(n.memo)((function(e){var t=e.user,a=e.onClick;return(c.a.createElement(c.a.Fragment,null,c.a.createElement("hr",null),t?c.a.createElement(V.a,null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"):c.a.createElement(V.a,{variant:"outline-success",xs:"sm",onClick:a},"\u0412\u0437\u044f\u0442\u044c \u0432 \u0440\u0430\u0431\u043e\u0442\u0443")))})),te=a(137),ae=a(145),ne=Object(n.memo)((function(e){var t=e.incident,a=e.myincident;console.log(t);var r=Object(o.c)(),l=Object(o.d)((function(e){return e.auth.user})).number;return Object(n.useEffect)((function(){}),[t]),t?c.a.createElement(te.a,null,c.a.createElement(ae.a,null,c.a.createElement(ae.a.Header,{className:J.a.header},c.a.createElement("div",null,"\u0418\u043d\u0446\u0438\u0434\u0435\u043d\u0442 \u2116",t.id," ",t.responsibleUser?c.a.createElement(c.a.Fragment,null,"| ",c.a.createElement(X,{startWork:t.startWork,nameResponsible:"\n                ".concat(t.responsibleUser.name1," ").concat(t.responsibleUser.name2.charAt(0),".").concat(t.responsibleUser.name3.charAt(0),".")})):null),c.a.createElement(Z,{myincident:void 0|a,status:t.statusId})),c.a.createElement(ae.a.Body,null,c.a.createElement(ae.a.Title,null,t.category?t.category.name:null,t.property?" / ".concat(t.property.name):null,t.option?" /  ".concat(t.option.name):null),c.a.createElement(ae.a.Text,null),c.a.createElement(ae.a.Text,null,"\u0418\u043d\u0438\u0446\u0438\u0430\u0442\u043e\u0440:"," ","".concat(t.initiatorUser.name1||""," ").concat(t.initiatorUser.name2||""," ").concat(t.initiatorUser.name3||"")),c.a.createElement(ae.a.Text,null,t.initiatorUser?"Email: ".concat(t.initiatorUser.email," "):null),c.a.createElement(ae.a.Text,null,t.initiatorUser?"\u0422\u0435\u043b.: ".concat(t.initiatorUser.phone1," "):null),t.text?c.a.createElement("hr",null):null,c.a.createElement(ae.a.Text,null,t.text),a?null:c.a.createElement(ee,{user:t.responsibleUser,onClick:function(){var e=new Date,a="".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()," ").concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds()),n={currentResponsible:l,startWork:a,statusId:Number(1)};r(C("put",n,t.id,"incidents"))}})),c.a.createElement(ae.a.Footer,{className:"text-right"},c.a.createElement("small",null,c.a.createElement("i",null,c.a.createElement("b",null,"\u0421\u043e\u0437\u0434\u0430\u043d:")," ",c.a.createElement(Y.a,{locale:"ru",fromNow:!0},t.createdAt))," | ",c.a.createElement("i",null,c.a.createElement("b",null,"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435:")," ",c.a.createElement(Y.a,{locale:"ru",fromNow:!0},t.updatedAt)))))):c.a.createElement("h2",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442")})),ce=a(65),re=a.n(ce),le=a(138),oe=a(146),ie=Object(n.memo)((function(e){var t=e.title,a=e.list,r=(e.isLoading,e.badge),l=e.onClick,o=e.activeId,i=Object(n.useState)(null),s=Object(P.a)(i,2),u=s[0],m=s[1];Object(n.useEffect)((function(){if(t){var e=c.a.createElement("h3",null,t,r?c.a.createElement(le.a,{variant:"primary",className:"ml-3"},a.length):null);m(e)}}),[t,a,r]);var d=Object(n.useState)([c.a.createElement("p",{key:0},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445")]),p=Object(P.a)(d,2),E=p[0],b=p[1];return Object(n.useEffect)((function(){var e=a.map((function(e){var t,a=e.id,n=e.name,r=e.createdAt;return t=r?"\u2116".concat(a," - ").concat(n||"N/A"," "):"".concat(n||"N/A"," "),c.a.createElement(oe.a.Item,{key:a,onClick:l?function(){return l(a)}:null,className:"".concat(re.a.item," ").concat(o===a?re.a.active:null)},t,r?c.a.createElement(Y.a,{locale:"ru",format:"DD.MM"},r):null)}));b(e)}),[a,o,l]),c.a.createElement(te.a,null,u,c.a.createElement("div",{className:re.a.block},c.a.createElement(oe.a,{variant:"flush"},E)))})),se=a(139),ue=a(91),me=Object(n.memo)((function(e){var t=e.list,a=e.isLoading,r=e.myincident,l=Object(o.c)(),i=Object(o.d)((function(e){return e.incidents.current}),o.b).incident,s=Object(n.useState)(),u=Object(P.a)(s,2),m=u[0],d=u[1];Object(n.useEffect)((function(){var e=t.find((function(e){return e.id===m}));l(function(e){return{type:"INCIDENT_CHOOSE",incident:e}}(e))}),[m,t]);var p=Object(n.useState)([]),E=Object(P.a)(p,2),b=E[0],f=E[1];return Object(n.useEffect)((function(){f(t.map((function(e){return{id:e.id,name:"".concat(e.category?e.category.name:""," ").concat(e.property?e.property.name:""," ").concat(e.option?e.option.name:""),createdAt:e.createdAt}})))}),[t]),c.a.createElement(se.a,{className:"mt-3"},c.a.createElement(ue.a,{xs:5},c.a.createElement(ie,{title:r?"\u041c\u043e\u0438 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u044b":"\u0418\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u044b",list:b,onClick:d,activeId:m,isLoading:a,badge:!r})),c.a.createElement(ue.a,null,c.a.createElement(te.a,null,i?c.a.createElement(ne,{incident:i,myincident:r}):null)))})),de=Object(n.memo)((function(){var e=Object(o.d)((function(e){return e.incidents})),t=e.list,a=e.isLoading;return(c.a.createElement(me,{list:t,isLoading:a}))})),pe=a(92),Ee=a.n(pe),be=a(142),fe=a(60),ve=a(61),Oe=Object(n.memo)((function(e){var t=e.title,a=e.list,r=e.setNumber,l=e.activeId,i=e.actionCreator,s=e.route,u=e.onClick,m=e.departmentId,p=e.categoryId,E=e.inputOff,b=Object(o.c)(),f=Object(n.useState)({name:"",categoryId:p,departmentId:m}),v=Object(P.a)(f,2),O=v[0],g=v[1];Object(n.useEffect)((function(){p?g({name:"",categoryId:p,departmentId:m}):m&&g({name:"",categoryId:p,departmentId:m})}),[p,m]);return c.a.createElement(ue.a,{xs:3},c.a.createElement("h2",null,t),E?null:c.a.createElement(be.a,{onSubmit:function(e){e.preventDefault(),s&&(b(i(s,"post",O)),g({name:"",categoryId:void 0,departmentId:m}))}},c.a.createElement(be.a.Group,null,c.a.createElement(be.a.Label,null),c.a.createElement(be.a.Control,{type:"text",placeholder:'\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "Enter"',value:O.name,onChange:function(e){g(Object(d.a)({},O,{name:e.target.value,departmentId:m}))}}))),c.a.createElement(oe.a,{variant:"flush"},a?a.map((function(e){return c.a.createElement(oe.a.Item,{key:e.id,className:e.id===l?"active":void 0},c.a.createElement(se.a,null,c.a.createElement(ue.a,{xs:9},c.a.createElement("div",{className:Ee.a.item,onClick:function(){u&&u(e.id,r||null)}},e.name)),E?null:c.a.createElement(ue.a,{xs:3},c.a.createElement(V.a,{size:"sm",variant:"danger",onClick:function(){b(i(s,"delete","",e.id))}},c.a.createElement(fe.a,{icon:ve.b})))))})):c.a.createElement("small",{className:"text-muted text-center"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442")))})),ge=Object(n.memo)((function(e){var t=e.list,a=e.departmentId,r=Object(n.useState)(),l=Object(P.a)(r,2),o=l[0],i=l[1],s=Object(n.useState)({}),u=Object(P.a)(s,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){d(t.find((function(e){return e.id===o})))}),[o,t]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Oe,{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",departmentId:a,list:t,setNumber:i,activeId:o,actionCreator:j,route:"categories",onClick:function(e,t){t(e)}}),m?c.a.createElement(Oe,{title:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b",list:m.properties?m.properties:null,actionCreator:j,route:"properties",categoryId:Number(o)}):null,m?c.a.createElement(Oe,{title:"\u041e\u043f\u0446\u0438\u0438",list:m.options?m.options:null,route:"options",actionCreator:j,categoryId:o}):null)})),he=Object(n.memo)((function(e){var t=e.department,a=e.setNumber,n=e.activeId,r=e.onClick;return(c.a.createElement(c.a.Fragment,null,c.a.createElement(Oe,{list:t,title:"\u041e\u0442\u0434\u0435\u043b\u044b",setNumber:a,activeId:n,onClick:r,route:"departments",inputOff:!0})))})),je=Object(n.memo)((function(e){var t=Object(o.d)((function(e){return e})).catalog,a=Object(n.useState)(),r=Object(P.a)(a,2),l=r[0],i=r[1],s=function(e,t){t(e)},u=Object(n.useState)([]),m=Object(P.a)(u,2),d=m[0],p=m[1];Object(n.useEffect)((function(){p(t.list.filter((function(e){return Number(e.departmentId)===Number(l)})))}),[l,t]);var E=Object(n.useState)(0),b=Object(P.a)(E,2),f=b[0],v=b[1],O=Object(n.useState)(),g=Object(P.a)(O,2),h=g[0],j=g[1];return Object(n.useEffect)((function(){switch(f){case 0:j("");break;case 1:j(c.a.createElement(se.a,null,c.a.createElement(he,{department:t.department,setNumber:i,activeId:l,onClick:s,inputed:!0}),c.a.createElement(ge,{list:d,departmentId:l})));break;default:j(c.a.createElement("p",{className:"align-content-center"},"\u041a\u043e\u043d\u0442\u0435\u043d\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435"))}}),[f,d,t.department,l]),c.a.createElement(se.a,null,c.a.createElement(ue.a,{xs:2},c.a.createElement(ie,{list:[{name:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433",id:1},{name:"\u0421\u0442\u0430\u0442\u0443\u0441",id:2},{name:"\u041f\u0440\u0438\u043d\u044f\u0442\u044c \u0432 \u0440\u0430\u0431\u043e\u0442\u0443",id:3}],title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",activeId:f,onClick:v})),c.a.createElement(ue.a,{xs:10},h))})),Ce=Object(n.memo)((function(e){var t=e.onChange,a=e.list,n=e.title,r=void 0===n?"":n;return(c.a.createElement(be.a.Group,{controlId:"exampleForm.ControlSelect1"},r?c.a.createElement(be.a.Label,null,r):null,c.a.createElement(be.a.Control,{as:"select",onChange:t},a.length?a.map((function(e){return c.a.createElement("option",{value:e.id,key:e.id},e.name)})):null)))})),Se=a(141),_e=Object(n.memo)((function(e){var t=e.handleClose,a=e.showModal,r=Object(o.d)((function(e){return e})),l=r.auth.user,i=r.catalog.list,s=new Date,u=Object(n.useState)({startWork:null,dateCreate:"".concat(s.getFullYear(),"-").concat(s.getMonth(),"-").concat(s.getDate()," ").concat(s.getHours(),":").concat(s.getMinutes(),":").concat(s.getSeconds()),currentResponsible:null,text:"",level:0,statusId:0,departmentId:null,positionId:null,name:"".concat(l.name1," ").concat(l.name2," ").concat(l.name3),email:l.email,userNumber:l.number,phone1:l.phone1,phone2:l.phone2,categoryId:i[0]?i[0].id:null,propertyId:i[0].properties[0]?i[0].properties[0].id:null,optionId:i[0].options[0]?i[0].options[0].id:null}),m=Object(P.a)(u,2),p=m[0],E=m[1],b=Object(n.useState)(p.categoryId),f=Object(P.a)(b,2),v=f[0],O=f[1],g=Object(n.useState)(p.propertyId),h=Object(P.a)(g,2),j=h[0],S=h[1],_=Object(n.useState)(p.optionId),I=Object(P.a)(_,2),y=I[0],N=I[1],x=Object(n.useState)(i.filter((function(e){return e.id===v}))),T=Object(P.a)(x,2),k=T[0],U=T[1];Object(n.useEffect)((function(){var e=v,t=j,a=y,n=i.filter((function(e){return e.id===v}));e!==p.categoryId&&(t=n[0].properties[0]?n[0].properties[0].id:null,a=n[0].options[0]?n[0].options[0].id:null),U(n),E(Object(d.a)({},p,{categoryId:e,propertyId:t,optionId:a}))}),[v,j,y]);var w=function(e,t,a){if(e.length)return c.a.createElement(Ce,{list:e,onChange:function(e){return t(Number(e.target.value))},title:a})},D=Object(o.c)();return c.a.createElement(Se.a,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:t},c.a.createElement(Se.a.Header,{closeButton:!0},c.a.createElement(Se.a.Title,null,"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u0430")),c.a.createElement(be.a,{onSubmit:function(e){e.preventDefault(),D({type:"INCIDENT_CREATE"}),D(C("post",p)),t()}},c.a.createElement(Se.a.Body,null,c.a.createElement(be.a.Group,{controlId:"formBasicEmail"},c.a.createElement(be.a.Control,{type:"text",disabled:!0,value:"".concat(p.name)}),c.a.createElement(be.a.Text,{className:"text-muted"},"\u0415\u0441\u043b\u0438 \u0438\u043c\u044f \u0432 \u044d\u0442\u043e\u043c \u043f\u043e\u043b\u0435 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442 \u0441 \u0412\u0430\u0448\u0438\u043c, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443.")),w(i,O,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"),w(k[0].properties,S),w(k[0].options,N),c.a.createElement(be.a.Group,{controlId:"exampleForm.ControlTextarea1"},c.a.createElement(be.a.Label,null,"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"),c.a.createElement(be.a.Control,{as:"textarea",rows:"3",value:p.text,placeholder:"\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e",onChange:function(e){E(Object(d.a)({},p,{text:e.target.value}))}}))),c.a.createElement(Se.a.Footer,null,c.a.createElement(V.a,{variant:"secondary",onClick:t},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),c.a.createElement(V.a,{variant:"primary",type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))})),Ie=a(50),ye=a.n(Ie),Ne=a(143),xe=a(144),Te=a(140),ke=Object(n.memo)((function(e){var t=Object(o.d)((function(e){return e.auth})).user,a=Object(n.useState)(1),r=Object(P.a)(a,2),l=r[0],i=r[1],s=Object(n.useState)(!1),u=Object(P.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(""),E=Object(P.a)(p,2),b=E[0],f=E[1];return Object(n.useEffect)((function(){t?(f("".concat(t.name1||"N"," ").concat(t.name2||"N")),i(1)):f("\u0413\u043e\u0441\u0442\u044c")}),[t]),c.a.createElement("nav",{className:"mb-1"},c.a.createElement(Ne.a,{collapseOnSelect:!0,expand:"lg",bg:"light",variant:"light"},c.a.createElement(Ne.a.Brand,null,"Service Desk"),c.a.createElement(Ne.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),c.a.createElement(Ne.a.Collapse,{id:"responsive-navbar-nav"},c.a.createElement(xe.a,{className:"".concat(ye.a.nav," mr-auto")},c.a.createElement(xe.a.Item,null,c.a.createElement(Q.b,{to:"/",activeClassName:"btn-light ".concat(ye.a.nav__button),className:"btn btn-link align-middle"},"\u0420\u0430\u0431\u043e\u0447\u0430\u044f \u043f\u0430\u043d\u0435\u043b\u044c"),c.a.createElement(Q.b,{to:"/myincidents",activeClassName:"btn-light ".concat(ye.a.nav__button),className:"btn btn-link align-middle"},"\u041c\u043e\u0438 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u044b"))," ",c.a.createElement(xe.a.Item,null,c.a.createElement(V.a,{onClick:function(){return d(!0)}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442"),m?c.a.createElement(_e,{handleClose:function(){return d(!1)},showModal:m}):null)),c.a.createElement(xe.a,null,c.a.createElement(xe.a.Item,null,c.a.createElement(xe.a.Link,{href:""},c.a.createElement(Ne.a.Text,{className:"pr-1"},"".concat(b)),c.a.createElement(Te.a,{src:"https://via.placeholder.com/35",roundedCircle:!0}))),1===l?c.a.createElement(xe.a.Item,{className:ye.a.nav__item},c.a.createElement(Q.b,{to:"/setting",activeClassName:"btn-light",className:"btn btn-link align-middle"},c.a.createElement(fe.a,{icon:ve.a}))):null))))})),Ue=Object(n.memo)((function(e){var t=Object(o.d)((function(e){return e})).incidents.myList;return(c.a.createElement(me,{list:t,myincident:!0}))})),we=Object(n.memo)((function(e){var t=Object(o.d)((function(e){return e})),a=t.auth.user,r=t.incidents.isUpdate,l=Object(o.c)(),i=Object(o.d)((function(e){return e})).incidents;return console.log(i),Object(n.useEffect)((function(){l({type:"AUTH_FETCHING",ip:window.ipGlobal}),l({type:"CATALOG_FETCHING"}),l(W("departments",q))}),[]),Object(n.useEffect)((function(){a&&r&&(l(W("incidents/my",_,"get",{},a.number)),l(W("incidents/responsible",S,"get",{},a.departmentId)))}),[a,r]),c.a.createElement(Q.a,null,c.a.createElement(ke,null),c.a.createElement(M.c,null,c.a.createElement(M.a,{exact:!0,path:"/",component:de}),c.a.createElement(M.a,{path:"/setting",component:je}),c.a.createElement(M.a,{path:"/myincidents",component:Ue})))}));l.a.render(c.a.createElement(o.a,{store:F},c.a.createElement(we,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");i?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}()},50:function(e,t,a){e.exports={nav:"styles_nav__20rXn",nav__item:"styles_nav__item__14i8u",nav__button:"styles_nav__button__O9Duu"}},65:function(e,t,a){e.exports={block:"styles_block__2nE8u",item:"styles_item__2r7MS",active:"styles_active__1gNvi"}},86:function(e,t,a){e.exports={header:"styles_header__11U4o"}},92:function(e,t,a){e.exports={item:"styles_item__2-gmj"}},97:function(e,t,a){e.exports=a(131)}},[[97,1,2]]]);
//# sourceMappingURL=main.773c9f90.chunk.js.map