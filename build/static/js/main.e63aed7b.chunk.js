(this["webpackJsonpnccp-service-desk-client"]=this["webpackJsonpnccp-service-desk-client"]||[]).push([[0],{122:function(e,t,n){e.exports={block:"sidebarWrapper_block__QUjqB",item:"sidebarWrapper_item__3QcyJ",active:"sidebarWrapper_active__2RWeW"}},126:function(e,t,n){e.exports={button_group:"styles_button_group__3GIll",select:"styles_select__3GRUj",select__option_placeholder:"styles_select__option_placeholder__M_qiN"}},127:function(e,t,n){e.exports={bar:"styles_bar__3S0BO"}},128:function(e,t,n){e.exports={header:"styles_header__3neJu"}},129:function(e,t,n){e.exports={item:"styles_item__3b-_p"}},134:function(e,t,n){e.exports=n(204)},143:function(e,t,n){},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(9),c=function(e){var t=e.route,n=e.actionSuccessed,c=e.actionUpdate,r=e.method,o=e.data,i=e.id,l=e.params;return{type:a.u,route:t,actionSuccessed:n,actionUpdate:c,data:o,id:i,method:r,params:l}}},198:function(e,t){},203:function(e,t,n){},204:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(19),o=n.n(r),i=n(6),l=(n(143),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function u(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(144);var s=n(33),m=n(133),d=n(13),b=n(9),f={isRequest:!1,isLoading:!1,user:null},p={list:[],isRequest:!1,isLoading:!1,isUpdate:!0,department:null},E={list:[],myList:[],history:[],current:{incident:null,isChange:!1},isRequest:!1,isLoading:!1,isUpdate:!0},O={list:[],isUpdate:!0},v={list:[],isUpdate:!0},j={list:[],isUpdate:!0},h=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.b:return Object(d.a)({},e,{isLoading:!1,isRequest:!0});case b.c:return Object(d.a)({},e,{user:t.data[0],isLoading:!0,isRequest:!1});default:return e}},catalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.f:return Object(d.a)({},e,{isLoading:!1,isRequest:!0});case b.g:return Object(d.a)({},e,{list:t.data,isLoading:!0,isRequest:!1,isUpdate:!1});case b.k:return Object(d.a)({},e,{department:t.data});case b.h:return Object(d.a)({},e,{isUpdate:!0});default:return e}},incidents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.p:return Object(d.a)({},e,{isLoading:!1,isRequest:!0});case b.q:return Object(d.a)({},e,{list:t.data,isLoading:!0,isUpdate:!1,isRequest:!1});case b.r:return Object(d.a)({},e,{myList:t.data,isLoading:!0,isRequest:!1,isUpdate:!1});case b.o:return Object(d.a)({},e,{history:t.data,isLoading:!0,isRequest:!1,isUpdate:!1});case b.m:return Object(d.a)({},e,{isUpdate:!0});case b.l:return Object(d.a)({},e,{current:Object(d.a)({},e.current,{incident:t.incident})});default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.w:return Object(d.a)({},e,{list:t.data,isUpdate:!1});case b.x:return Object(d.a)({},e,{isUpdate:!0});default:return e}},positions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.s:return Object(d.a)({},e,{list:t.data,isUpdate:!1});case b.t:return Object(d.a)({},e,{isUpdate:!0});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.y:return Object(d.a)({},e,{list:t.data,isUpdate:!1});case b.z:return Object(d.a)({},e,{isUpdate:!0});default:return e}}}),_=n(26),g=n.n(_),y=n(12),S=n(23),x=n.n(S),k=function(){return{type:b.b}},C=function(e){return{type:b.c,data:e}},N=function(){return{type:b.h}},U=function(e){return{type:b.g,data:e}},I=function(e){return{type:b.q,data:e}},w=function(e){return{type:b.o,data:e}},T=function(){return{type:b.m}},A=g.a.mark(G),D=g.a.mark(M),R=g.a.mark(P),F=g.a.mark(W),L=g.a.mark(Q),H=g.a.mark(q);function G(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.d)(b.a,P);case 2:return e.next=4,Object(y.d)(b.d,W);case 4:return e.next=6,Object(y.c)(b.e,q);case 6:return e.next=8,Object(y.c)(b.u,M);case 8:return e.next=10,Object(y.c)(b.n,Q);case 10:case"end":return e.stop()}}),A)}function M(e){var t,n,a,c,r,o,i,l,u;return g.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=e.route,n=e.actionSuccessed,a=e.actionUpdate,c=e.method,r=e.data,o=void 0===r?{}:r,i=e.id,l=e.params,s.prev=1,l&&Object.assign(o,{params:l}),s.t0=c,s.next="post"===s.t0?6:"delete"===s.t0?13:"put"===s.t0?20:27;break;case 6:return s.next=8,Object(y.a)((function(){return S.post("http://192.168.214.106:8080/api/".concat(t),o)}));case 8:if(u=s.sent,!a){s.next=12;break}return s.next=12,Object(y.b)(a());case 12:return s.abrupt("break",34);case 13:return s.next=15,Object(y.a)((function(){return S.delete("http://192.168.214.106:8080/api/".concat(t,"/").concat(i),o)}));case 15:if(u=s.sent,!a){s.next=19;break}return s.next=19,Object(y.b)(a());case 19:return s.abrupt("break",34);case 20:return s.next=22,Object(y.a)((function(){return S.put("http://192.168.214.106:8080/api/".concat(t,"/").concat(i),o)}));case 22:if(u=s.sent,!a){s.next=26;break}return s.next=26,Object(y.b)(a());case 26:return s.abrupt("break",34);case 27:return s.next=29,Object(y.a)((function(){return S.get("http://192.168.214.106:8080/api/".concat(t,"/"),o)}));case 29:if(u=s.sent,!a){s.next=33;break}return s.next=33,Object(y.b)(a());case 33:return s.abrupt("break",34);case 34:if(!n){s.next=37;break}return s.next=37,Object(y.b)(n(u.data));case 37:s.next=42;break;case 39:s.prev=39,s.t1=s.catch(1),console.log(s.t1.message);case 42:case"end":return s.stop()}}),D,null,[[1,39]])}function P(e){var t,n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.ip,a.prev=1,a.next=4,Object(y.b)(k());case 4:return a.next=6,Object(y.a)((function(){return S.get("http://192.168.214.106:8080/api/auth/?ip=".concat(t))}));case 6:return n=a.sent,a.next=9,Object(y.b)(C(n.data[0]));case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.log(a.t0.message);case 14:case"end":return a.stop()}}),R,null,[[1,11]])}function W(){var e;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(y.b)({type:b.f});case 3:return t.next=5,Object(y.a)((function(){return S.get("http://192.168.214.106:8080/api/categories")}));case 5:return e=t.sent,t.next=8,Object(y.b)(U(e.data));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0.message);case 13:case"end":return t.stop()}}),F,null,[[0,10]])}function Q(e){var t,n,a,c,r;return g.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.route,n=e.method,a=e.data,c=e.id,o.prev=1,o.next=4,Object(y.b)({type:b.p});case 4:o.t0=n,o.next="post"===o.t0?7:"delete"===o.t0?12:"put"===o.t0?17:"get"===o.t0?22:28;break;case 7:return o.next=9,Object(y.a)((function(){return S.post("http://192.168.214.106:8080/api/".concat(t),a)}));case 9:return o.next=11,Object(y.b)(T());case 11:return o.abrupt("break",29);case 12:return o.next=14,Object(y.a)((function(){return S.delete("http://192.168.214.106:8080/api/".concat(t,"/").concat(c),a)}));case 14:return o.next=16,Object(y.b)(T());case 16:return o.abrupt("break",29);case 17:return o.next=19,Object(y.a)((function(){return S.put("http://192.168.214.106:8080/api/".concat(t,"/").concat(c),a)}));case 19:return o.next=21,Object(y.b)(T());case 21:return o.abrupt("break",29);case 22:return o.next=24,Object(y.a)((function(){return S.get("http://192.168.214.106:8080/api/incidents")}));case 24:return r=o.sent,o.next=27,Object(y.b)(I(r.data));case 27:case 28:return o.abrupt("break",29);case 29:o.next=34;break;case 31:o.prev=31,o.t1=o.catch(1),console.log(o.t1.message);case 34:case"end":return o.stop()}}),L,null,[[1,31]])}function q(e){var t,n,a,c;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.route,n=e.method,a=e.data,c=e.id,r.prev=1,r.next=4,Object(y.b)(k());case 4:r.t0=n,r.next="post"===r.t0?7:"delete"===r.t0?10:13;break;case 7:return r.next=9,Object(y.a)((function(){return S.post("http://192.168.214.106:8080/api/".concat(t),a)}));case 9:return r.abrupt("break",14);case 10:return r.next=12,Object(y.a)((function(){return S.delete("http://192.168.214.106:8080/api/".concat(t,"/").concat(c),a)}));case 12:case 13:return r.abrupt("break",14);case 14:return r.next=16,Object(y.b)({type:b.d});case 16:r.next=21;break;case 18:r.prev=18,r.t1=r.catch(1),console.log(r.t1.message);case 21:case"end":return r.stop()}}),H,null,[[1,18]])}var Y=Object(m.a)(),B=Object(s.e)(h,Object(s.a)(Y));Y.run(G);var z=B,K=n(49),V=n(41),J=n(15),X=function(e){return{type:b.k,data:e}},Z=function(){return{type:b.x}},$=function(e){return{type:b.w,data:e}},ee=n(8),te=n(210),ne=n(219),ae=n(223),ce=n(209),re=n(72),oe=n.n(re),ie=n(222),le=n(40),ue=n.n(le),se=n(30),me=n.n(se),de=n(21),be=n(20),fe=Object(a.memo)((function(e){var t=e.list,n=e.onClick,r=e.activeId,o=Object(a.useState)([c.a.createElement("p",{key:0},"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445")]),i=Object(ee.a)(o,2),l=i[0],u=i[1];return Object(a.useEffect)((function(){if(Array.isArray(t)&&t.length){var e=t.map((function(e){var t,a,o="";return e.createdAt&&(o=" \u2116".concat(e.id," ")),e.status?a=8388608===Number(e.status)?"#c3e6cb":"#bee5eb":0===e.status&&(a="#007bff"),c.a.createElement(ie.a.Item,{key:e.id,onClick:n?function(){return n(e.id)}:null,className:"".concat(me.a.item," ").concat(r===e.id?me.a.active:null)},c.a.createElement("div",{className:"".concat(me.a.icon," ").concat(me.a.icon_left)},null===(t=function(e,t){var n=[];return(e.status||0===Number(e.status))&&(n.push(c.a.createElement(de.a,{key:e.id+"t",icon:be.g,color:t,className:"mb-1"})),e.responsible&&0===Number(e.status)&&n.push(c.a.createElement(de.a,{key:e.id+"c",icon:be.i,color:"#007bff"}))),n}(e,a))||void 0===t?void 0:t.map((function(e){return e}))),c.a.createElement("div",{className:me.a.item__body},c.a.createElement("div",{className:me.a.item__id},c.a.createElement("span",null,o)),c.a.createElement("div",{className:me.a.item__text},c.a.createElement("span",{className:me.a.item__text_span},e.name?e.name:"N/A"," ",e.responsible)),c.a.createElement("div",{className:me.a.item__date},e.createdAt?c.a.createElement(ue.a,{locale:"ru",format:"DD.MM.YY"},e.createdAt):null)),c.a.createElement("div",{className:"".concat(me.a.icon," ").concat(me.a.icon_right)},c.a.createElement(de.a,{icon:be.b})))}));u(e)}}),[t,r,n]),c.a.createElement(ie.a,{variant:"flush"},l)})),pe=Object(a.memo)((function(e){var t=e.onClick,n=e.activeId,r=e.onClickHistory,o=Object(i.d)((function(e){return e.incidents.history}),i.b),l=Object(a.useState)(!1),u=Object(ee.a)(l,2),s=u[0],m=u[1];Object(a.useEffect)((function(){s&&r()}),[s,r]);var d=Object(a.useState)([]),b=Object(ee.a)(d,2),f=b[0],p=b[1];return Object(a.useEffect)((function(){p(o.map((function(e){var t;return t=e.responsibleUser?"(".concat(e.responsibleUser.name1," ").concat(e.responsibleUser.name2.charAt(0),". ").concat(e.responsibleUser.name3.charAt(0),".)"):"",{id:e.id,name:"".concat(e.category?e.category.name:""," ").concat(e.property?e.property.name:""," ").concat(e.option?e.option.name:""),createdAt:e.createdAt,responsible:t,status:e.statusId}})))}),[o]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ne.a,{defaultActiveKey:"1",className:oe.a.accordion},c.a.createElement(ae.a,{className:oe.a.item},c.a.createElement(ne.a.Toggle,{as:ce.a,eventKey:"0",variant:"light",onClick:function(){m(!0)}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e"),c.a.createElement(ne.a.Collapse,{eventKey:"0"},c.a.createElement(ae.a.Body,{className:oe.a.body},Array.isArray(f)&&f.length?c.a.createElement(fe,{list:f,onClick:t,activeId:n}):null)))))})),Ee=n(122),Oe=n.n(Ee),ve=Object(a.memo)((function(e){var t=e.title,n=e.list,r=e.onClick,o=e.activeId,i=e.onClickHistory,l=Object(a.useState)(null),u=Object(ee.a)(l,2),s=u[0],m=u[1];return Object(a.useEffect)((function(){t&&m(c.a.createElement("h3",null,t))}),[t,n]),c.a.createElement(c.a.Fragment,null,c.a.createElement(te.a,null,s,c.a.createElement("div",{className:Oe.a.block},Array.isArray(n)&&n.length?c.a.createElement(fe,{list:n,onClick:r,activeId:o}):null,c.a.createElement(pe,{onClick:r,activeId:o,onClickHistory:i}))))})),je=n(73),he=n.n(je),_e=(n(101),n(217)),ge=n(218),ye=Object(a.memo)((function(e){var t=e.title,n=e.children,a=e.show,r=e.onSubmit,o=e.onOk,i=e.onHide,l=e.textOk,u=e.textNot,s=e.validated;return(c.a.createElement(c.a.Fragment,null,c.a.createElement(_e.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:a,onHide:i},t?c.a.createElement(_e.a.Header,{closeButton:!0},c.a.createElement(_e.a.Title,null,t)):null,c.a.createElement(ge.a,{noValidate:!0,validated:s,onSubmit:r||void 0},n?c.a.createElement(_e.a.Body,null,n):void 0,l||u?c.a.createElement(_e.a.Footer,null,u?c.a.createElement(ce.a,{variant:"secondary",onClick:i||void 0},u):null,l?c.a.createElement(ce.a,{variant:"primary",onClick:r?void 0:o,type:r?"submit":"button"},l):null):null))))})),Se=Object(a.memo)((function(e){var t=e.show,n=e.onHide,r=e.incident,o=Object(i.c)(),l=Object(i.d)((function(e){return e.status}),i.b).list,u=Object(i.d)((function(e){return e.auth}),i.b).user,s=Object(a.useState)("".concat(u.name1," ").concat(u.name2," ").concat(u.name3)),m=Object(ee.a)(s,1)[0],d=Object(a.useState)(!1),b=Object(ee.a)(d,2),f=b[0],p=b[1],E=Object(a.useState)({statusId:r.statusId}),O=Object(ee.a)(E,2),v=O[0],j=O[1],h=Object(a.useState)(),_=Object(ee.a)(h,2),g=_[0],y=_[1];return l.length?c.a.createElement(ye,{show:t,title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u0430",onHide:n,textOk:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),e.stopPropagation();var t=function(e){var t={text:e,userNumber:u.number,incidentId:r.id};o(Object(J.a)({route:"comments",method:"post",actionUpdate:T,data:t,id:r.id}))};e.currentTarget.checkValidity()&&(v.statusId!==r.statusId&&t("".concat(m,' \u0438\u0437\u043c\u0435\u043d\u0438\u043b \u0441\u0442\u0430\u0442\u0443\u0441 \u043d\u0430 "').concat(l.find((function(e){return e.id===v.statusId})).name,'"')),t(g),o(Object(J.a)({route:"incidents",method:"put",actionUpdate:T,data:v,id:r.id})),n()),p(!0)},validated:f},c.a.createElement(ge.a.Group,{controlId:"exampleForm.ControlSelect2"},c.a.createElement(ge.a.Label,null,"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"),c.a.createElement(ge.a.Control,{as:"select",defaultValue:l.find((function(e){return e.id===r.statusId})).id,onChange:function(e){j({statusId:Number(e.target.value)})}},l.sort((function(e,t){return e.id<t.id?-1:1})).map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)})))),c.a.createElement(ge.a.Group,null,c.a.createElement(ge.a.Label,null,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),c.a.createElement(ge.a.Control,{as:"textarea",rows:"3",required:!0,onChange:function(e){y(e.target.value)}}),c.a.createElement(ge.a.Control.Feedback,{type:"invalid"},"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439!"))):c.a.createElement(c.a.Fragment,null)})),xe=n(211),ke=function(e){return{type:b.y,data:e}},Ce=n(126),Ne=n.n(Ce),Ue=Object(a.memo)((function(e){var t=e.show,n=e.onHide,r=e.onClick,o=Object(i.c)(),l=Object(i.d)((function(e){return e.users.list}),i.b),u=Object(i.d)((function(e){return e.auth.user}),i.b),s=Object(i.d)((function(e){return e.incidents.current}),i.b).incident,m=Object(a.useState)([]),d=Object(ee.a)(m,2),b=d[0],f=d[1];Object(a.useLayoutEffect)((function(){l&&f(l.filter((function(e){return Number(e.number)!==Number(s.currentResponsible)})))}),[l,s.currentResponsible]);var p=Object(a.useState)(),E=Object(ee.a)(p,2),O=E[0],v=E[1];Object(a.useLayoutEffect)((function(){b[0]&&v(b[0].number)}),[b]);var j=Object(a.useState)(""),h=Object(ee.a)(j,2),_=h[0],g=h[1];return Object(a.useEffect)((function(){var e=l.find((function(e){return Number(e.number)===Number(O)}));e&&g("".concat(e.name1," ").concat(e.name2.charAt(0),". ").concat(e.name3.charAt(0),".")),l.length&&l.number&&v(l.filter((function(e){return Number(e.number)!==Number(s.currentResponsible)}))[0].number)}),[O,l,s.currentResponsible]),Object(a.useLayoutEffect)((function(){o(Object(J.a)({route:"users",actionSuccessed:ke,params:{departmentId:u.departmentId}}))}),[o,u.departmentId]),l.length>1?c.a.createElement(ye,{title:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0434\u043b\u044f \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u0430 \u2116".concat(s.id),show:t,onHide:n,textOk:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onOk:function(){n(),r.call(null,{bodyData:{currentResponsible:O},comment:'\u0421\u0442\u0430\u0442\u0443\u0441 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d \u043d\u0430 "\u0412 \u0440\u0430\u0431\u043e\u0442\u0435". \u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u043c \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d: '.concat(_)})}},c.a.createElement(c.a.Fragment,null,c.a.createElement(ge.a.Group,null,c.a.createElement(ge.a.Label,null,"\u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0445"),c.a.createElement(ge.a.Control,{as:"select",defaultValue:b[0]?b[0].number:0,onChange:function(e){v(e.target.value)},className:Ne.a.select},b.map((function(e){return c.a.createElement("option",{value:e.number,key:e.number},"".concat(e.name1," ").concat(e.name2.charAt(0),". ").concat(e.name3.charAt(0),"."))})))))):c.a.createElement(ye,{title:"\u0412 \u043e\u0442\u0434\u0435\u043b\u0435 \u043d\u0435\u0442 \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432",onHide:n,show:t})})),Ie=n(127),we=n.n(Ie),Te=Object(a.memo)((function(e){var t=e.show,n=e.onClick,r=e.onHide,o=Object(i.d)((function(e){return e.catalog}),i.b),l=Object(i.d)((function(e){return e.auth.user}),i.b);Object(a.useLayoutEffect)((function(){}),[o]);var u=Object(a.useState)(null),s=Object(ee.a)(u,2),m=s[0],d=s[1],b=Object(a.useState)([]),f=Object(ee.a)(b,2),p=f[0],E=f[1];Object(a.useLayoutEffect)((function(){if(o&&l&&o.department){var e=o.department.filter((function(e){return e.id!==l.departmentId}));E(e),d(e[0].id)}}),[o,l]);var O=Object(a.useState)(null),v=Object(ee.a)(O,2),j=v[0],h=v[1],_=Object(a.useState)([]),g=Object(ee.a)(_,2),y=g[0],S=g[1];Object(a.useEffect)((function(){var e=o.list.filter((function(e){return Number(e.departmentId)===Number(m)}));e.length?(S(e),h(e[0].id)):(S([]),h(null))}),[m,o.list]);var x=Object(a.useState)(null),k=Object(ee.a)(x,2),C=k[0],N=k[1],U=Object(a.useState)([]),I=Object(ee.a)(U,2),w=I[0],T=I[1],A=Object(a.useState)(null),D=Object(ee.a)(A,2),R=D[0],F=D[1],L=Object(a.useState)([]),H=Object(ee.a)(L,2),G=H[0],M=H[1];Object(a.useEffect)((function(){if(y){var e=y.find((function(e){return Number(e.id)===Number(j)}));e&&(e.properties.length?(T(e.properties),N(e.properties[0].id)):(T([]),N(null)),e.options.length?(M(e.options),F(e.options[0].id)):(M([]),F(null)))}}),[j,y]);var P=function(e,t,n,a){return c.a.createElement(c.a.Fragment,null,c.a.createElement(ge.a.Group,null,c.a.createElement(ge.a.Label,null,e),c.a.createElement(ge.a.Control,{as:"select",defaultValue:t,onChange:function(e){n(e.target.value)}},a.sort((function(e,t){return t.name<e.name?1:-1})).map((function(e){return c.a.createElement("option",{value:e.id,key:e.id},e.name)})))))};return(c.a.createElement(ye,{title:"\u041f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442",show:t,onHide:r,onOk:function(){var e;n.call(null,{comment:"".concat(l.name1," ").concat(l.name2.charAt(0)," ").concat(l.name3.charAt(0),' \u043f\u0435\u0440\u0435\u0434\u0430\u043b \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442 \u0432 "').concat(null===(e=p.find((function(e){return Number(e.id)===Number(m)})))||void 0===e?void 0:e.name,'"'),bodyData:{categoryId:j,propertyId:C,optionId:R,currentResponsible:null}})},textOk:"\u041f\u0435\u0440\u0435\u0434\u0430\u0442\u044c"},c.a.createElement(c.a.Fragment,null,p.length?P("\u041e\u0442\u0434\u0435\u043b\u044b",m,d,p):void 0,y.length?P("\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",j,h,y):void 0,w.length?P("\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b",C,N,w):void 0,G.length?P("\u041e\u043f\u0446\u0438\u0438",R,F,G):void 0)))})),Ae=Object(a.memo)((function(e){var t=e.onClick,n=e.handleOpenModal,r=Object(i.d)((function(e){return e.auth.user}),i.b),o=Object(a.useState)(""),l=Object(ee.a)(o,2),u=l[0],s=l[1];Object(a.useLayoutEffect)((function(){s("".concat(r.name1," ").concat(r.name2," ").concat(r.name3))}),[r]);var m=Object(a.useState)(!1),d=Object(ee.a)(m,2),b=d[0],f=d[1];var p=Object(a.useState)(!1),E=Object(ee.a)(p,2),O=E[0],v=E[1],j=Object(i.d)((function(e){return e.incidents.current.incident}),i.b);Object(a.useLayoutEffect)((function(){}),[j]);var h=Object(a.useMemo)((function(){var e=j.category,n=j.property,a=j.option;if(e||n||a)return e.level?t.bind(null,{bodyData:{currentResponsible:r.number},comment:"".concat(u," \u043d\u0430\u0437\u043d\u0430\u0447\u0438\u043b \u0441\u0435\u0431\u044f \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439. \u041e\u0436\u0438\u0434\u0430\u0435\u0442 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u044f."),isConsent:!0}):t.bind(null,{bodyData:{currentResponsible:r.number},comment:'\u0421\u0442\u0430\u0442\u0443\u0441 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d \u043d\u0430 "\u0412 \u0440\u0430\u0431\u043e\u0442\u0435". \u041e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u043c \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d: '.concat(u)})}),[j,u,t,r.number]),_=Object(a.useMemo)((function(){return Number(j.statusId)>0&&j.currentResponsible?c.a.createElement(c.a.Fragment,null,c.a.createElement(ce.a,{variant:"outline-primary",onClick:n},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c")):j.currentResponsible?r.position.level?c.a.createElement(c.a.Fragment,null,c.a.createElement(xe.a,{"aria-label":"Basic example"},c.a.createElement(ce.a,{variant:"success",onClick:t.bind(null,{comment:"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u043e"})},"\u0421\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u0442\u044c"),c.a.createElement(ce.a,{variant:"outline-danger",onClick:t.bind(null,{comment:"\u041e\u0442\u043a\u0430\u0437\u0430\u043d\u043e",bodyData:{currentResponsible:null,statusId:0}})},"\u041e\u0442\u043a\u0430\u0437\u0430\u0442\u044c"))):void 0:c.a.createElement(c.a.Fragment,null,c.a.createElement(ce.a,{variant:"outline-success",onClick:h},"\u0412\u0437\u044f\u0442\u044c \u0432 \u0440\u0430\u0431\u043e\u0442\u0443"))}),[j,h,n,t,r.position.level]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("hr",null),c.a.createElement("div",{className:we.a.bar},c.a.createElement("div",null,r.position.level?c.a.createElement(c.a.Fragment,null,c.a.createElement(ce.a,{variant:"outline-secondary",size:"sm",onClick:function(){f(!0)},className:"m-1"},"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e"),b?c.a.createElement(Ue,{show:b,onHide:function(){f(!1)},onClick:t}):void 0):null,c.a.createElement(ce.a,{variant:"outline-secondary",size:"sm",className:"m-1",onClick:function(){v(!0)}},"\u041f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u043e\u0442\u0434\u0435\u043b"),O?c.a.createElement(Te,{show:O,onHide:function(){v(!1)},onClick:t}):void 0),_))})),De=n(212),Re=n(128),Fe=n.n(Re),Le=Object(a.memo)((function(e){var t=e.startWork,n=e.nameResponsible;return(c.a.createElement(c.a.Fragment,null,c.a.createElement("small",null,"".concat(n," \u043f\u0440\u0438\u043d\u044f\u043b(\u0430) \u0432 \u0440\u0430\u0431\u043e\u0442\u0443 ").concat(t?"":"(\u043d\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043e\u0432\u0430\u043d\u0438\u0438)"),t?c.a.createElement(ue.a,{locale:"ru",fromNow:!0},t):void 0)))})),He=n(129),Ge=n.n(He),Me=Object(a.memo)((function(e){var t=e.status,n=Object(a.useState)("info"),r=Object(ee.a)(n,2),o=r[0],l=r[1];Object(a.useEffect)((function(){l(8388608===t?"success":"info")}),[t]);var u=Object(i.d)((function(e){return e.status})).list;return t&&u.length?c.a.createElement(c.a.Fragment,null,c.a.createElement(ce.a,{variant:o,disabled:!0,size:"sm",className:Ge.a.item},u.find((function(e){return e.id===t})).name)):c.a.createElement(c.a.Fragment,null)})),Pe=Object(a.memo)((function(e){var t=e.incident,n=e.myincident;return(c.a.createElement(ae.a.Header,{className:Fe.a.header},c.a.createElement("div",null,"\u0418\u043d\u0446\u0438\u0434\u0435\u043d\u0442 \u2116",t.id," ",t.responsibleUser?c.a.createElement(c.a.Fragment,null,"| ",c.a.createElement(Le,{startWork:t.startWork,nameResponsible:"\n                ".concat(t.responsibleUser.name1," ").concat(t.responsibleUser.name2.charAt(0),".").concat(t.responsibleUser.name3.charAt(0),".")})):null),c.a.createElement(Me,{myincident:void 0|n,status:t.statusId})))})),We=Object(a.memo)((function(e){var t=e.incident,n=e.myincident,r=Object(i.c)(),o=Object(i.d)((function(e){return e.auth}),i.b).user;Object(a.useEffect)((function(){}),[t]);var l=Object(a.useState)(!1),u=Object(ee.a)(l,2),s=u[0],m=u[1],d=Object(a.useState)(!1),b=Object(ee.a)(d,2),f=b[0],p=b[1];return t?c.a.createElement(c.a.Fragment,null,s?c.a.createElement(Se,{show:s,onHide:function(){return m(!1)},incident:t}):null,c.a.createElement(te.a,null,c.a.createElement(ae.a,null,c.a.createElement(Pe,{incident:t,myincident:n}),c.a.createElement(ae.a.Body,{className:he.a.window},c.a.createElement(ae.a.Title,null,t.category?t.category.name:null,t.property?" / ".concat(t.property.name):null,t.option?" /  ".concat(t.option.name):null),c.a.createElement(ae.a.Text,null),c.a.createElement(ae.a.Text,null,"\u0418\u043d\u0438\u0446\u0438\u0430\u0442\u043e\u0440:"," ","".concat(t.initiatorUser.name1||""," ").concat(t.initiatorUser.name2||""," ").concat(t.initiatorUser.name3||"")),c.a.createElement(ae.a.Text,null,t.initiatorUser?"Email: ".concat(t.initiatorUser.email," "):null),c.a.createElement(ae.a.Text,null,t.initiatorUser?"\u0422\u0435\u043b.: ".concat(t.initiatorUser.phone1," "):null),t.text?c.a.createElement(c.a.Fragment,null,c.a.createElement("hr",null),c.a.createElement(ae.a.Text,null,c.a.createElement("pre",null,t.text))):null,n?null:c.a.createElement(Ae,{incident:t,handleOpenModal:function(){return m(!0)},onClick:function(e){e.number;var n=e.comment,a=e.bodyData,c=e.isConsent,i=new Date,l={startWork:"".concat(i.getFullYear(),"-").concat(i.getMonth()+1,"-").concat(i.getDate()," ").concat(i.getHours(),":").concat(i.getMinutes(),":").concat(i.getSeconds()),statusId:Number(1)};c&&(l.startWork=null,l.statusId=0),a&&Object.assign(l,a),console.log("incidentData",l),r(Object(J.a)({route:"incidents",method:"put",actionUpdate:T,data:l,id:t.id}));var u={text:n,userNumber:o.number,incidentId:t.id};r(Object(J.a)({route:"comments",method:"post",actionUpdate:T,data:u,id:t.id}))},user:o}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(ne.a,{defaultActiveKey:"1"},c.a.createElement(ae.a,null,c.a.createElement(ne.a.Toggle,{as:ae.a.Header,eventKey:"0",onClick:function(){p(!f)},className:he.a.comment__header},c.a.createElement(de.a,{icon:f?be.a:be.b})," ","\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"),c.a.createElement(ne.a.Collapse,{eventKey:"0"},c.a.createElement(De.a,{striped:!0,bordered:!0,size:"sm",className:he.a.table},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\u2116"),c.a.createElement("th",null,"\u0422\u0435\u043a\u0441\u0442"),c.a.createElement("th",null,"\u0410\u0432\u0442\u043e\u0440"),c.a.createElement("th",null,"\u0414\u0430\u0442\u0430"))),c.a.createElement("tbody",null,t.comments.map((function(e,t){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,t+1),c.a.createElement("td",null,c.a.createElement("pre",null,e.text)),c.a.createElement("td",null,"".concat(e.user.name1," ").concat(e.user.name2.charAt(0),". ").concat(e.user.name3.charAt(0),".")),c.a.createElement("td",null,c.a.createElement(ue.a,{locale:"ru",format:"HH:mm D.MM.YY\u0433",withTitle:!0},e.createdAt)))})))))))),c.a.createElement(ae.a.Footer,{className:"text-right"},c.a.createElement("small",null,c.a.createElement("i",null,c.a.createElement("b",null,"\u0421\u043e\u0437\u0434\u0430\u043d:")," ",c.a.createElement(ue.a,{locale:"ru",fromNow:!0},t.createdAt))," | ",c.a.createElement("i",null,c.a.createElement("b",null,"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435:")," ",c.a.createElement(ue.a,{locale:"ru",fromNow:!0},t.updatedAt))))))):c.a.createElement("h2",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442")})),Qe=n(213),qe=n(125),Ye=Object(a.memo)((function(e){var t=e.params,n=e.title,r=e.badge,o=Object(i.d)((function(e){return e.incidents}),i.b),l=o.list,u=o.history,s=o.current,m=Object(i.d)((function(e){return e.incidents}),i.b),f=Object(i.c)(),p=Object(a.useCallback)((function(e,t){f(Object(J.a)({route:"incidents",actionSuccessed:t,params:e}))}),[f]);Object(a.useLayoutEffect)((function(){t&&p(t,I)}),[m.isUpdate,t]);var E=Object(a.useCallback)((function(){var e=Object(d.a)({},t,{history:"true"});p(e,w)}),[t,p,m.isUpdate]),O=Object(a.useState)(),v=Object(ee.a)(O,2),j=v[0],h=v[1];Object(a.useEffect)((function(){var e,t=function(){var e=u.find((function(e){return e.id===j})),t=l.find((function(e){return e.id===j}));return e||(t||void 0)}();f((e=t,{type:b.l,incident:e}))}),[j,l,u]);var _=Object(a.useState)([]),g=Object(ee.a)(_,2),y=g[0],S=g[1];return Object(a.useEffect)((function(){S(l.map((function(e){var t;return t=e.responsibleUser?"(".concat(e.responsibleUser.name1," ").concat(e.responsibleUser.name2.charAt(0),". ").concat(e.responsibleUser.name3.charAt(0),".)"):"",{id:e.id,name:"".concat(e.category?e.category.name:""," ").concat(e.property?e.property.name:""," ").concat(e.option?e.option.name:""),createdAt:e.createdAt,responsible:t,status:e.statusId}})))}),[l]),c.a.createElement(Qe.a,{className:"mt-3"},c.a.createElement(qe.a,{xs:5},c.a.createElement(ve,{title:n,list:y,onClick:h,activeId:j,badge:!r,onClickHistory:E})),c.a.createElement(qe.a,{xs:7},c.a.createElement(te.a,null,s.incident?c.a.createElement(We,{incident:s.incident,myincident:r}):null)))})),Be=Object(a.memo)((function(){var e=Object(a.useState)(),t=Object(ee.a)(e,2),n=t[0],r=t[1],o=Object(i.d)((function(e){return e.auth.user}),i.b),l=Object(a.useState)("\u0418\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u044b"),u=Object(ee.a)(l,2),s=u[0],m=u[1];return Object(a.useEffect)((function(){o&&(r({departmentId:o.departmentId}),m("".concat(o.department.name)))}),[o]),c.a.createElement(Ye,{params:n,title:s})})),ze=n(43),Ke=Object(a.memo)((function(e){var t=Object(i.c)(),n=Object(i.d)((function(e){return e.catalog}),i.b).department,r=Object(a.useState)(),o=Object(ee.a)(r,2),l=o[0],u=o[1],s=Object(i.d)((function(e){return e.catalog.list}),i.b),m=Object(a.useState)([]),d=Object(ee.a)(m,2),b=d[0],f=d[1];Object(a.useEffect)((function(){f(s.filter((function(e){return e.departmentId===l})))}),[l,s]);var p=Object(a.useState)(),E=Object(ee.a)(p,2),O=E[0],v=E[1],j=Object(a.useState)(),h=Object(ee.a)(j,2),_=h[0],g=h[1],y=Object(a.useCallback)((function(e,n){e=arguments[1],n=arguments[2];var a=arguments[0].route;if(e.preventDefault(),n){var c={name:n,categoryId:O,departmentId:l};t(Object(J.a)({method:"post",route:a,actionUpdate:N,data:c}))}}),[l,t,O]),S=Object(a.useCallback)((function(){var e=arguments[0].route,n=arguments[1],a=window.confirm("\u0412\u0441\u0435 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u044b \u0441\u0432\u044f\u0437\u0430\u043d\u044b\u0435 \u0441 \u044d\u0442\u0438\u043c \u0443\u0434\u0430\u043b\u044f\u0442\u044c\u0441\u044f. \u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c?");a&&t(Object(J.a)({method:"delete",actionUpdate:N,route:e,id:n}))}),[t]),x=Object(a.useCallback)((function(e,n){var a=e.list,c=e.route;t(Object(J.a)({id:n,actionUpdate:N,route:c,method:"put",data:{level:Number(!a.find((function(e){return e.id===n})).level)}}))}),[t]);Object(a.useEffect)((function(){if(l){var e="categories";g(c.a.createElement(ze.a,{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",list:b,onSubmit:y.bind(null,{route:e}),onDelete:S.bind(null,{route:e}),onClick:v,activeId:O,onFavorites:x.bind(null,{route:e,list:b}),xs:3}))}}),[l,b,O]);var k=Object(a.useState)(null),C=Object(ee.a)(k,2),U=C[0],I=C[1];Object(a.useEffect)((function(){I(b.find((function(e){return e.id===O})))}),[O,b]);var w=Object(a.useState)(),T=Object(ee.a)(w,2),A=T[0],D=T[1],R=Object(a.useState)(),F=Object(ee.a)(R,2),L=F[0],H=F[1];return Object(a.useEffect)((function(){if(U){var e="properties";D(c.a.createElement(ze.a,{title:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b",list:U.properties,onSubmit:y.bind(null,{route:e}),onDelete:S.bind(null,{route:e}),onFavorites:x.bind(null,{route:e,list:U.properties}),xs:3})),e="options",H(c.a.createElement(ze.a,{title:"\u041e\u043f\u0446\u0438\u0438",list:U.options,onSubmit:y.bind(null,{route:e}),onDelete:S.bind(null,{route:e}),onFavorites:x.bind(null,{route:e,list:U.options}),xs:3}))}else D(null),H(null)}),[U,S,y,x]),c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"),c.a.createElement(Qe.a,null,c.a.createElement(ze.a,{title:"\u041e\u0442\u0434\u0435\u043b\u044b",list:n,onClick:u,activeId:l,xs:3}),_,A,L))})),Ve=Object(a.memo)((function(e){var t=Object(i.d)((function(e){return e.status}),i.b).list,n=Object(i.c)(),a=Z;return c.a.createElement(qe.a,null,c.a.createElement("h2",null,"\u0421\u0442\u0430\u0442\u0443\u0441"),c.a.createElement(ze.a,{list:t,onSubmit:function(e,t){if(e.preventDefault(),t){var c={name:t};n(Object(J.a)({method:"post",route:"status",actionUpdate:a,data:c}))}},onDelete:function(e){n(Object(J.a)({method:"delete",actionUpdate:a,route:"status",id:e}))},xs:5}))})),Je=c.a.lazy((function(){return n.e(3).then(n.bind(null,224))})),Xe=Object(a.memo)((function(e){var t=Object(a.useState)(0),n=Object(ee.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(),l=Object(ee.a)(i,2),u=l[0],s=l[1];return Object(a.useEffect)((function(){switch(r){case 0:s("");break;case 1:s(c.a.createElement(Ke,null));break;case 2:s(c.a.createElement(Ve,null));break;case 3:s(c.a.createElement(a.Suspense,{fallback:c.a.createElement("div",null,"Loading...")},c.a.createElement(Je,null)));break;default:s(c.a.createElement("p",{className:"align-content-center"},"\u041a\u043e\u043d\u0442\u0435\u043d\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435"))}}),[r]),c.a.createElement(Qe.a,{className:"m-1"},c.a.createElement(qe.a,{xs:3},c.a.createElement("h1",null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),c.a.createElement(fe,{list:[{name:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433",id:1},{name:"\u0421\u0442\u0430\u0442\u0443\u0441",id:2},{name:"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438",id:3}],activeId:r,onClick:o})),c.a.createElement(qe.a,{xs:9},u))})),Ze=n(70),$e=n.n(Ze),et=Object(a.memo)((function(e){var t=e.onChange,n=e.list,a=e.title,r=void 0===a?"":a;return(c.a.createElement(ge.a.Group,{controlId:"exampleForm.ControlSelect1"},r?c.a.createElement(ge.a.Label,null,r):null,c.a.createElement(ge.a.Control,{as:"select",onChange:t},n.length?n.map((function(e){return c.a.createElement("option",{value:e.id,key:e.id},e.name)})):null)))})),tt=$e()("http://192.168.214.106:8000"),nt=Object(a.memo)((function(e){var t=e.handleClose,n=e.showModal,r=e.list,o=e.user,l=new Date,u=Object(a.useState)({startWork:null,dateCreate:"".concat(l.getFullYear(),"-").concat(l.getMonth(),"-").concat(l.getDate()," ").concat(l.getHours(),":").concat(l.getMinutes(),":").concat(l.getSeconds()),currentResponsible:null,text:"",level:0,statusId:0,departmentId:null,positionId:null,name:"".concat(o.name1," ").concat(o.name2," ").concat(o.name3),email:o.email,userNumber:o.number,phone1:o.phone1,phone2:o.phone2,categoryId:r[0]?r[0].id:null,propertyId:r[0].properties[0]?r[0].properties[0].id:null,optionId:r[0].options[0]?r[0].options[0].id:null}),s=Object(ee.a)(u,2),m=s[0],f=s[1],p=Object(a.useState)(m.categoryId),E=Object(ee.a)(p,2),O=E[0],v=E[1],j=Object(a.useState)(m.propertyId),h=Object(ee.a)(j,2),_=h[0],g=h[1],y=Object(a.useState)(m.optionId),S=Object(ee.a)(y,2),x=S[0],k=S[1],C=Object(a.useState)(r.filter((function(e){return e.id===O}))),N=Object(ee.a)(C,2),U=N[0],I=N[1];Object(a.useEffect)((function(){var e=O,t=_,n=x,a=r.filter((function(e){return e.id===O}));e!==m.categoryId&&(t=a[0].properties[0]?a[0].properties[0].id:null,n=a[0].options[0]?a[0].options[0].id:null),I(a),f(Object(d.a)({},m,{departmentId:U[0].departmentId,categoryId:e,propertyId:t,optionId:n}))}),[O,_,x]);var w=function(e,t,n){if(e.length)return c.a.createElement(et,{list:e,onChange:function(e){return t(Number(e.target.value))},title:n})},T=Object(i.c)();return c.a.createElement(ye,{show:n,onHide:t,title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u0430",onSubmit:function(e){e.preventDefault(),T(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"incidents";return{type:b.n,route:a,method:e,data:t,id:n}}("post",m)),tt.emit("departmentId",U[0].departmentId),t()},textOk:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",textNot:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"},c.a.createElement(ge.a.Group,{controlId:"formBasicEmail"},c.a.createElement(ge.a.Control,{type:"text",disabled:!0,value:"".concat(m.name)}),c.a.createElement(ge.a.Text,{className:"text-muted"},"\u0415\u0441\u043b\u0438 \u0438\u043c\u044f \u0432 \u044d\u0442\u043e\u043c \u043f\u043e\u043b\u0435 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442 \u0441 \u0412\u0430\u0448\u0438\u043c, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443.")),w(r,v,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"),w(U[0].properties,g),w(U[0].options,k),c.a.createElement(ge.a.Group,{controlId:"exampleForm.ControlTextarea1"},c.a.createElement(ge.a.Label,null,"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"),c.a.createElement(ge.a.Control,{as:"textarea",rows:"3",value:m.text,placeholder:"\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e",onChange:function(e){f(Object(d.a)({},m,{text:e.target.value}))}})))})),at=n(35),ct=n.n(at),rt=n(220),ot=n(221),it=n(215),lt=n(216),ut=Object(a.memo)((function(e){var t=Object(i.d)((function(e){return e.auth})).user,n=Object(i.d)((function(e){return e.catalog})).list,r=Object(i.d)((function(e){return e.incidents.list}),i.b),o=Object(a.useState)(1),l=Object(ee.a)(o,2),u=l[0],s=l[1],m=Object(a.useState)(!1),d=Object(ee.a)(m,2),b=d[0],f=d[1],p=Object(a.useState)(""),E=Object(ee.a)(p,2),O=E[0],v=E[1];return Object(a.useEffect)((function(){t?(v("".concat(t.name1||"N"," ").concat(t.name2||"N")),s(1)):v("\u0413\u043e\u0441\u0442\u044c")}),[t]),c.a.createElement("nav",{className:"mb-1"},c.a.createElement(rt.a,{collapseOnSelect:!0,expand:"lg",bg:"light",variant:"light"},c.a.createElement(rt.a.Brand,null,"Service Desk"),c.a.createElement(rt.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),c.a.createElement(rt.a.Collapse,{id:"responsive-navbar-nav"},c.a.createElement(ot.a,{className:"".concat(ct.a.nav," mr-auto")},c.a.createElement(ot.a.Item,null,c.a.createElement(K.b,{to:"/",activeClassName:"btn-light",className:"btn btn-link align-middle ".concat(ct.a.nav__button)},"\u0420\u0430\u0431\u043e\u0447\u0430\u044f \u043f\u0430\u043d\u0435\u043b\u044c",r.length?c.a.createElement(it.a,{variant:"primary",className:"ml-1"},r.filter((function(e){return 0===Number(e.statusId)})).length):void 0),c.a.createElement(K.b,{to:"/myincidents",activeClassName:"btn-light ".concat(ct.a.nav__button),className:"btn btn-link align-middle ".concat(ct.a.nav__button)},"\u041c\u043e\u0438 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442\u044b"))," ",c.a.createElement(ot.a.Item,null,c.a.createElement(ce.a,{onClick:function(){return f(!0)}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442"),b&&n.length&&t?c.a.createElement(nt,{handleClose:function(){return f(!1)},showModal:b,user:t,list:n}):null)),c.a.createElement(ot.a,null,c.a.createElement(ot.a.Item,null,c.a.createElement(ot.a.Link,{href:""},c.a.createElement("div",{className:ct.a.user},c.a.createElement(rt.a.Text,{className:"pr-1"},"".concat(O)),c.a.createElement("div",{className:ct.a.avatar},c.a.createElement(lt.a,{src:t?t.photo:"",roundedCircle:!0,className:ct.a.avatar__img}))))),1===u?c.a.createElement(ot.a.Item,{className:ct.a.nav__item},c.a.createElement(K.b,{to:"/setting",activeClassName:"btn-light",className:"btn btn-link align-middle"},c.a.createElement(de.a,{icon:be.c}))):null))))})),st=Object(a.memo)((function(e){var t=Object(a.useState)(),n=Object(ee.a)(t,2),r=n[0],o=n[1],l=Object(i.d)((function(e){return e.auth.user}),i.b);return Object(a.useEffect)((function(){l&&o({userNumber:l.number})}),[l]),c.a.createElement(Ye,{params:r,badge:!0})})),mt=n(90),dt=(n(202),n(203),n(132)),bt=$e()("http://192.168.214.106:8000"),ft=Object(a.memo)((function(){var e=Object(i.d)((function(e){return e.auth.user}),i.b),t=Object(i.c)(),n=Object(dt.a)("../../sounds/SpeechOn.wav",{volume:1}),r=Object(ee.a)(n,1)[0];return Object(a.useEffect)((function(){bt.on(String(null===e||void 0===e?void 0:e.departmentId),(function(e){t(T()),r(),mt.b.info(c.a.createElement("div",{className:"alertCustom"},c.a.createElement("div",{className:"alertCustom__title"},c.a.createElement("span",{role:"img","aria-label":"inbox"},"\ud83d\udce5"),c.a.createElement("h6",null,"\u041f\u043e\u0441\u0442\u0443\u043f\u0438\u043b \u043d\u043e\u0432\u044b\u0439 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442"))))}))}),[e,t]),c.a.createElement(mt.a,{position:"top-right",autoClose:!1,newestOnTop:!0,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!0,draggable:!0})})),pt=Object(a.memo)((function(e){var t=Object(i.d)((function(e){return e.catalog}),i.b),n=Object(i.d)((function(e){return e.status}),i.b),r=Object(i.d)((function(e){return e}),i.b),o=Object(i.c)();return Object(a.useEffect)((function(){}),[r]),Object(a.useEffect)((function(){x.a.get("http://api.nccp-eng.ru/",{params:{method:"auth.start"}}).then((function(e){o(Object(J.a)({route:"users",actionSuccessed:C,params:{number:e.data.number}}))})),o(Object(J.a)({route:"departments",actionSuccessed:X}))}),[o]),Object(a.useEffect)((function(){t.isUpdate&&o(Object(J.a)({route:"categories",actionSuccessed:U}))}),[t.isUpdate,o]),Object(a.useEffect)((function(){n.isUpdate&&o(Object(J.a)({route:"status",actionSuccessed:$}))}),[n.isUpdate,o]),c.a.createElement(K.a,null,c.a.createElement(ut,null),c.a.createElement(ft,null),c.a.createElement(V.c,null,c.a.createElement(V.a,{exact:!0,path:"/",component:Be}),c.a.createElement(V.a,{path:"/setting",component:Xe}),c.a.createElement(V.a,{path:"/myincidents",component:st})))}));o.a.render(c.a.createElement(i.a,{store:z},c.a.createElement(pt,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");l?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):u(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):u(t,e)}))}}()},30:function(e,t,n){e.exports={icon:"siderbar_icon__1OJVl",icon_right:"siderbar_icon_right__1ggeQ",icon_left:"siderbar_icon_left__2h_Xh",item:"siderbar_item__1aUnm",item__body:"siderbar_item__body__3UYy0",item__id:"siderbar_item__id__1xPib",item__text:"siderbar_item__text__1rhRk",item__text_span:"siderbar_item__text_span__aTR9A",item__date:"siderbar_item__date__1cAUY",active:"siderbar_active__Hbj6E"}},35:function(e,t,n){e.exports={nav:"styles_nav__20rXn",nav__item:"styles_nav__item__14i8u",nav__button:"styles_nav__button__O9Duu",user:"styles_user__37C1v",avatar:"styles_avatar__2A89E",avatar__img:"styles_avatar__img__dPlyx"}},43:function(e,t,n){"use strict";var a=n(8),c=n(0),r=n.n(c),o=n(74),i=n.n(o),l=n(222),u=n(213),s=n(125),m=n(209),d=n(21),b=n(20),f=Object(c.memo)((function(e){var t=e.onFavorites;return(r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{size:"sm",variant:"warning",onClick:function(){t()}},r.a.createElement(d.a,{icon:b.f}))))})),p=n(130),E=n.n(p),O=Object(c.memo)((function(e){var t=e.filterList,n=e.onClick,a=e.onDelete,c=e.onFavorites,o=e.activeId;return(r.a.createElement(l.a,{variant:"flush"},t.length?t.sort((function(e,t){return t.name<e.name?1:-1})).map((function(e){return r.a.createElement(E.a,{key:e.id,opposite:!0,collapse:!0,bottom:!0},r.a.createElement(l.a.Item,{key:e.id,className:e.id===o?"active":void 0,variant:e.level?"warning":void 0},r.a.createElement(u.a,null,r.a.createElement(s.a,{xs:9},r.a.createElement("div",{className:n?i.a.item_pointer:void 0,onClick:function(){n&&n(e.id)}},r.a.createElement("span",null,e.name))),r.a.createElement(s.a,{xs:3,className:i.a.buttonGroup},r.a.createElement("div",{className:i.a.buttonGroup_flexRow},a&&!e.noChange?r.a.createElement(m.a,{size:"sm",variant:"danger",onClick:function(){a(e.id)}},r.a.createElement(d.a,{icon:b.h})):null,c?r.a.createElement(f,{onFavorites:c.bind(null,e.id)}):null)))))})):r.a.createElement("small",{className:"text-muted text-center"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442")))})),v=n(214),j=n(124),h=n(218);t.a=Object(c.memo)((function(e){var t=e.title,n=e.onSubmit,o=e.onDelete,i=e.onClick,l=e.activeId,u=e.list,m=e.onFavorites,f=e.xs,p=Object(c.useState)(""),E=Object(a.a)(p,2),_=E[0],g=E[1],y=Object(c.useState)(u),S=Object(a.a)(y,2),x=S[0],k=S[1],C=Object(c.useState)(""),N=Object(a.a)(C,2),U=N[0],I=N[1];return Object(c.useLayoutEffect)((function(){k(u.filter((function(e){return~e.name.toLowerCase().indexOf(U.toLowerCase())})))}),[u,U]),Array.isArray(u)?r.a.createElement(s.a,{xs:f},r.a.createElement("h2",null,t),r.a.createElement(v.a,{className:"mb-1"},r.a.createElement(v.a.Prepend,null,r.a.createElement(v.a.Text,{id:"basic-addon1"},r.a.createElement(d.a,{icon:b.e}))),r.a.createElement(j.a,{placeholder:"\u041f\u043e\u0438\u0441\u043a...","aria-label":"\u0412\u0435\u0434\u0443\u0449\u0438\u0439 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0441\u0442","aria-describedby":"basic-addon1",onChange:function(e){I(e.target.value)}})),n?r.a.createElement(h.a,{onSubmit:function(e){n&&(n(e,_),g(""))}},r.a.createElement(h.a.Group,null,r.a.createElement(v.a,{className:"mb-1"},r.a.createElement(v.a.Prepend,null,r.a.createElement(v.a.Text,{id:"basic-addon1"},r.a.createElement(d.a,{icon:b.d}))),r.a.createElement(h.a.Control,{type:"text",placeholder:'\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "Enter"',value:_,onChange:function(e){g(e.target.value)}})))):null,r.a.createElement(O,{filterList:x,activeId:l,onClick:i,onDelete:o,onFavorites:m})):null}))},72:function(e,t,n){e.exports={accordion:"sidebarHistory_accordion__u_uMR",item:"sidebarHistory_item__2Deig",body:"sidebarHistory_body__2An-D"}},73:function(e,t,n){e.exports={comment__header:"styles_comment__header__1jyUp",table:"styles_table__gnpPI",window:"styles_window__1xKut"}},74:function(e,t,n){e.exports={item_pointer:"styles_item_pointer__Ecpw2",spinner:"styles_spinner__3GZkI",buttonGroup:"styles_buttonGroup__2xFGT",buttonGroup_flexRow:"styles_buttonGroup_flexRow__2U2YD"}},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return r})),n.d(t,"v",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return s})),n.d(t,"h",(function(){return m})),n.d(t,"n",(function(){return d})),n.d(t,"p",(function(){return b})),n.d(t,"q",(function(){return f})),n.d(t,"m",(function(){return p})),n.d(t,"l",(function(){return E})),n.d(t,"r",(function(){return O})),n.d(t,"o",(function(){return v})),n.d(t,"i",(function(){return j})),n.d(t,"j",(function(){return h})),n.d(t,"k",(function(){return _})),n.d(t,"u",(function(){return g})),n.d(t,"w",(function(){return y})),n.d(t,"x",(function(){return S})),n.d(t,"s",(function(){return x})),n.d(t,"t",(function(){return k})),n.d(t,"y",(function(){return C})),n.d(t,"z",(function(){return N}));var a="AUTH_FETCHING",c="AUTH_REQUEST_SENDD",r="AUTH_REQUEST_SUCCESSED",o="START_REQUEST_SUCCESSED",i="CATALOG_FETCHING",l="CATALOG_REQUEST_SENDD",u="CATALOG_REQUEST_SUCCESSED",s="CATALOG_POST",m="CATALOG_UPDATE",d="INCIDENT_FETCHING",b="INCIDENT_REQUEST_SENDD",f="INCIDENT_REQUEST_SUCCESSED",p="INCIDENT_CREATE",E="INCIDENT_CHOOSE",O="MY_INCIDENT_REQUEST_SUCCESSED",v="INCIDENT_HISTORY_REQUEST_SUCCESSED",j="DEPARTMENT_FETCHING",h="DEPARTMENT_REQUEST_SENDD",_="DEPARTMENT_REQUEST_SUCCESSED",g="QUERY_API",y="STATUS_REQUEST_SUCCESSED",S="STATUS_UPDATE",x="POSITIONS_REQUEST_SUCCESSED",k="POSITIONS_UPDATE",C="USERS_REQUEST_SUCCESSED",N="USERS_UPDATE"}},[[134,1,2]]]);
//# sourceMappingURL=main.e63aed7b.chunk.js.map